{"ast":null,"code":"import axios from 'axios';\nexport const registerUser = user => async dispatch => {\n  dispatch({\n    type: 'USER_REGISTER_REQUEST'\n  });\n  try {\n    const res = await axios.post(\"/api/users/signup\", user);\n    console.log(res);\n    dispatch({\n      type: 'USER_REGISTER_SUCCESS'\n    });\n  } catch (error) {\n    dispatch({\n      type: 'USER_REGISTER_FAILED',\n      payload: error\n    });\n  }\n};\nexport const loginUser = user => async dispatch => {\n  dispatch({\n    type: 'USER_LOGIN_REQUEST'\n  });\n  try {\n    const res = await axios.post(\"/api/users//routes/student_route/signin\", user);\n    console.log(res);\n    dispatch({\n      type: 'USER_LOGIN_SUCCESS',\n      payload: res.data\n    });\n    localStorage.setItem(\"jwt\", res.data.token);\n    localStorage.setItem('currentUser', JSON.stringify(res.data));\n    window.location.href = \"/dashboard\";\n  } catch (error) {\n    dispatch({\n      type: 'USER_LOGIN_FAILED',\n      payload: error.message\n    });\n  }\n};\nexport const logoutUser = () => async dispatch => {\n  localStorage.removeItem('currentUser');\n  window.location.href = \"/\";\n};\nexport const userProfile = () => async (dispatch, getState) => {\n  dispatch({\n    type: \"USER_PROFILE_REQUEST\"\n  });\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n    }\n  };\n  try {\n    const response = await axios.get(`/api/users/profile`, config);\n    dispatch({\n      type: \"USER_PROFILE_SUCCESS\",\n      payload: response.data\n    });\n  } catch (error) {\n    dispatch({\n      type: \"USER_PROFILE_FAILED\",\n      payload: error\n    });\n  }\n};\nexport const getAllStudent = () => async dispatch => {\n  dispatch({\n    type: 'GET_STUDENTS_REQUEST'\n  });\n  try {\n    const response = await axios.get('/api/users/allStudent');\n    dispatch({\n      type: 'GET_STUDENTS_SUCCESS',\n      payload: response.data\n    });\n  } catch (error) {\n    dispatch({\n      type: 'GET_STUDENTS_FAILED',\n      payload: error\n    });\n  }\n};\nexport const removeAStudent = postId => async dispatch => {\n  try {\n    await axios.post('/api/users/removeStudent', {\n      postId\n    });\n    const response2 = await axios.get(`/api/users/allStudent`);\n    dispatch({\n      type: 'GET_STUDENTS_SUCCESS',\n      payload: response2.data\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"names":["axios","registerUser","user","dispatch","type","res","post","console","log","error","payload","loginUser","data","localStorage","setItem","token","JSON","stringify","window","location","href","message","logoutUser","removeItem","userProfile","getState","config","headers","Authorization","getItem","response","get","getAllStudent","removeAStudent","postId","response2"],"sources":["D:/lsm/frontend/src/actions/user_action.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nexport const registerUser = (user) => async dispatch => {\r\n    dispatch({\r\n        type: 'USER_REGISTER_REQUEST'\r\n    })\r\n\r\n    try {\r\n        const res = await axios.post(\"/api/users/signup\", user);\r\n        console.log(res)\r\n        dispatch({\r\n            type: 'USER_REGISTER_SUCCESS'\r\n\r\n        })\r\n    } catch (error) {\r\n        dispatch({\r\n            type: 'USER_REGISTER_FAILED',\r\n            payload: error\r\n        })\r\n    }\r\n}\r\n\r\nexport const loginUser = (user) => async dispatch => {\r\n    dispatch({\r\n        type: 'USER_LOGIN_REQUEST'\r\n    })\r\n\r\n    try {\r\n        const res = await axios.post(\"/api/users//routes/student_route/signin\", user);\r\n        console.log(res)\r\n        dispatch({\r\n            type: 'USER_LOGIN_SUCCESS',\r\n            payload: res.data\r\n        })\r\n        localStorage.setItem(\"jwt\", res.data.token);\r\n        localStorage.setItem('currentUser', JSON.stringify(res.data));\r\n        window.location.href = \"/dashboard\";\r\n    } catch (error) {\r\n        dispatch({\r\n            type: 'USER_LOGIN_FAILED',\r\n            payload: error.message\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const logoutUser = () => async dispatch => {\r\n\r\n    localStorage.removeItem('currentUser');\r\n    window.location.href = \"/\";\r\n\r\n}\r\n\r\n\r\nexport const userProfile = () => async (dispatch, getState) => {\r\n    dispatch({\r\n        type: \"USER_PROFILE_REQUEST\"\r\n    });\r\n    const config = {\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        },\r\n    };\r\n\r\n    try {\r\n        const response = await axios.get(`/api/users/profile`, config);\r\n        dispatch({\r\n            type: \"USER_PROFILE_SUCCESS\",\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch({\r\n            type: \"USER_PROFILE_FAILED\",\r\n            payload: error,\r\n        });\r\n    }\r\n\r\n};\r\n\r\nexport const getAllStudent = ()=> async dispatch =>{\r\n    dispatch({\r\n        type:'GET_STUDENTS_REQUEST'\r\n    })\r\n    try {\r\n        const response = await axios.get('/api/users/allStudent');\r\n   \r\n        dispatch({\r\n           type:'GET_STUDENTS_SUCCESS',\r\n           payload:response.data\r\n       })\r\n    } catch (error) {\r\n       dispatch({\r\n           type:'GET_STUDENTS_FAILED',\r\n           payload:error\r\n       })\r\n    }\r\n}\r\n\r\nexport const removeAStudent = (postId)=> async dispatch =>{\r\n\r\n   \r\n \r\n    try {\r\n         await axios.post('/api/users/removeStudent',{postId});\r\n        const response2 = await axios.get(`/api/users/allStudent`);\r\n       \r\n        dispatch({\r\n            type:'GET_STUDENTS_SUCCESS',\r\n            payload:response2.data\r\n        })\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n  \r\n    \r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}